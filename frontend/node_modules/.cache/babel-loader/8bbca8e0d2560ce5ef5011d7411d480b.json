{"ast":null,"code":"var _jsxFileName = \"/Users/doviethoang/Desktop/github/dynonary-japanese/frontend/src/components/UI/SearchInputCustom/index.js\",\n    _s = $RefreshSig$();\n\nimport { Grow } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport wordApi from 'apis/wordApi';\nimport { MAX } from 'constant';\nimport NAV_SEARCH_DATA from 'constant/nav-search-data';\nimport { debounce } from 'helper';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport WordDetailModal from '../WordDetailModal';\nimport useStyle from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet timer = null;\n\nfunction SearchInputCustom(_ref) {\n  _s();\n\n  let {\n    placeholder,\n    showInput,\n    prefixIcon\n  } = _ref;\n  const classes = useStyle();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const searchBarRef = useRef(null);\n  const [resultList, setResultList] = useState([]);\n  const [wordDetails, setWordDetails] = useState(null);\n  const history = useHistory();\n\n  const handleCloseModal = () => {\n    setAnchorEl(null);\n  };\n\n  const handleOpenWordDetails = async (word, to) => {\n    setAnchorEl(null);\n\n    if (Boolean(to)) {\n      history.push(to);\n      return;\n    }\n\n    const apiRes = await wordApi.getWordDetails(word);\n    setWordDetails(apiRes === null || apiRes === void 0 ? void 0 : apiRes.data);\n  };\n\n  const handleSearch = e => {\n    timer = debounce(timer, async function () {\n      var _e$target, _apiRes$data, _navSearchList;\n\n      const word = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value;\n\n      if (!Boolean(word)) {\n        return;\n      }\n\n      let navSearchList = NAV_SEARCH_DATA.filter(i => `${i.title} ${i.searchKey}`.indexOf(word.toLowerCase()) !== -1).map(i => ({\n        title: i.title,\n        to: i.to\n      })) || [];\n      const apiRes = await wordApi.getSearchWord(word, true);\n\n      if ((_apiRes$data = apiRes.data) !== null && _apiRes$data !== void 0 && _apiRes$data.packList) {\n        navSearchList = [...navSearchList, ...apiRes.data.packList.map(i => ({\n          title: i.word,\n          to: null\n        }))];\n      }\n\n      setResultList(((_navSearchList = navSearchList) === null || _navSearchList === void 0 ? void 0 : _navSearchList.slice(0, 20)) || []);\n      setAnchorEl(searchBarRef.current);\n    }, 350);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.nativeInput,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: searchBarRef,\n      className: `${classes.icon} flex-center ${showInput ? 'show-input' : 'cur-pointer'}`,\n      children: prefixIcon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), showInput && /*#__PURE__*/_jsxDEV(Grow, {\n      in: true,\n      children: /*#__PURE__*/_jsxDEV(InputBase, {\n        onChange: handleSearch,\n        autoFocus: true,\n        placeholder: placeholder,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        inputProps: {\n          'aria-label': 'search',\n          maxLength: MAX.SEARCH_LEN\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      classes: {\n        paper: classes.resMenu\n      },\n      keepMounted: true,\n      anchorEl: anchorEl,\n      getContentAnchorEl: null,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      open: Boolean(anchorEl),\n      onClose: handleCloseModal,\n      children: (resultList === null || resultList === void 0 ? void 0 : resultList.length) > 0 ? resultList.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: () => handleOpenWordDetails(item.title, item.to),\n        children: item.title\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(MenuItem, {\n        className: classes.resMenuItem,\n        onClick: handleCloseModal,\n        children: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), wordDetails && /*#__PURE__*/_jsxDEV(WordDetailModal, {\n      open: true,\n      loading: false,\n      ...wordDetails,\n      onClose: () => setWordDetails(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchInputCustom, \"Wwjm8QKIKXtWL+oBl+FoP2d0qTU=\", false, function () {\n  return [useStyle, useHistory];\n});\n\n_c = SearchInputCustom;\nSearchInputCustom.propTypes = {\n  placeholder: PropTypes.string,\n  prefixIcon: PropTypes.any,\n  showInput: PropTypes.bool\n};\nSearchInputCustom.defaultProps = {\n  placeholder: '',\n  prefixIcon: null,\n  showInput: false\n};\nexport default SearchInputCustom;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchInputCustom\");","map":{"version":3,"sources":["/Users/doviethoang/Desktop/github/dynonary-japanese/frontend/src/components/UI/SearchInputCustom/index.js"],"names":["Grow","InputBase","Menu","MenuItem","wordApi","MAX","NAV_SEARCH_DATA","debounce","PropTypes","React","useRef","useState","useHistory","WordDetailModal","useStyle","timer","SearchInputCustom","placeholder","showInput","prefixIcon","classes","anchorEl","setAnchorEl","searchBarRef","resultList","setResultList","wordDetails","setWordDetails","history","handleCloseModal","handleOpenWordDetails","word","to","Boolean","push","apiRes","getWordDetails","data","handleSearch","e","target","value","navSearchList","filter","i","title","searchKey","indexOf","toLowerCase","map","getSearchWord","packList","slice","current","nativeInput","icon","root","inputRoot","input","inputInput","maxLength","SEARCH_LEN","paper","resMenu","vertical","horizontal","length","item","index","resMenuItem","propTypes","string","any","bool","defaultProps"],"mappings":"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","sourcesContent":["import { Grow } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport wordApi from 'apis/wordApi';\nimport { MAX } from 'constant';\nimport NAV_SEARCH_DATA from 'constant/nav-search-data';\nimport { debounce } from 'helper';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport WordDetailModal from '../WordDetailModal';\nimport useStyle from './style';\nlet timer = null;\n\nfunction SearchInputCustom({ placeholder, showInput, prefixIcon }) {\n  const classes = useStyle();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const searchBarRef = useRef(null);\n  const [resultList, setResultList] = useState([]);\n  const [wordDetails, setWordDetails] = useState(null);\n  const history = useHistory();\n\n  const handleCloseModal = () => {\n    setAnchorEl(null);\n  };\n\n  const handleOpenWordDetails = async (word, to) => {\n    setAnchorEl(null);\n\n    if (Boolean(to)) {\n      history.push(to);\n      return;\n    }\n\n    const apiRes = await wordApi.getWordDetails(word);\n    setWordDetails(apiRes?.data);\n  };\n\n  const handleSearch = (e) => {\n    timer = debounce(\n      timer,\n      async function () {\n        const word = e.target?.value;\n        if (!Boolean(word)) {\n          return;\n        }\n        let navSearchList =\n          NAV_SEARCH_DATA.filter(\n            (i) =>\n              `${i.title} ${i.searchKey}`.indexOf(word.toLowerCase()) !== -1,\n          ).map((i) => ({ title: i.title, to: i.to })) || [];\n\n        const apiRes = await wordApi.getSearchWord(word, true);\n        if (apiRes.data?.packList) {\n          navSearchList = [\n            ...navSearchList,\n            ...apiRes.data.packList.map((i) => ({ title: i.word, to: null })),\n          ];\n        }\n\n        setResultList(navSearchList?.slice(0, 20) || []);\n        setAnchorEl(searchBarRef.current);\n      },\n      350,\n    );\n  };\n\n  return (\n    <div className={classes.nativeInput}>\n      <div\n        ref={searchBarRef}\n        className={`${classes.icon} flex-center ${\n          showInput ? 'show-input' : 'cur-pointer'\n        }`}>\n        {prefixIcon}\n      </div>\n      {showInput && (\n        <Grow in={true}>\n          <InputBase\n            onChange={handleSearch}\n            autoFocus\n            placeholder={placeholder}\n            classes={{\n              root: classes.inputRoot,\n              input: classes.inputInput,\n            }}\n            inputProps={{ 'aria-label': 'search', maxLength: MAX.SEARCH_LEN }}\n          />\n        </Grow>\n      )}\n\n      {/* result menu */}\n      <Menu\n        classes={{\n          paper: classes.resMenu,\n        }}\n        keepMounted\n        anchorEl={anchorEl}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={Boolean(anchorEl)}\n        onClose={handleCloseModal}>\n        {resultList?.length > 0 ? (\n          resultList.map((item, index) => (\n            <MenuItem\n              key={index}\n              onClick={() => handleOpenWordDetails(item.title, item.to)}>\n              {item.title}\n            </MenuItem>\n          ))\n        ) : (\n          <MenuItem className={classes.resMenuItem} onClick={handleCloseModal}>\n            Không tìm thấy kết quả nào\n          </MenuItem>\n        )}\n      </Menu>\n\n      {/* word detail modal */}\n      {wordDetails && (\n        <WordDetailModal\n          open={true}\n          loading={false}\n          {...wordDetails}\n          onClose={() => setWordDetails(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nSearchInputCustom.propTypes = {\n  placeholder: PropTypes.string,\n  prefixIcon: PropTypes.any,\n  showInput: PropTypes.bool,\n};\n\nSearchInputCustom.defaultProps = {\n  placeholder: '',\n  prefixIcon: null,\n  showInput: false,\n};\n\nexport default SearchInputCustom;\n"]},"metadata":{},"sourceType":"module"}